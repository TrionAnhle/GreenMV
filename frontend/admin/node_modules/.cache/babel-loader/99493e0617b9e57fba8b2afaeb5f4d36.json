{"ast":null,"code":"var _jsxFileName = \"P:\\\\Thuc-tap\\\\GreenMovie-V3.0\\\\frontend\\\\admin\\\\src\\\\containers\\\\User\\\\AccountSessionPage\\\\AccountSessionPage.js\",\n    _s = $RefreshSig$();\n\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport React, { useState, useEffect } from 'react';\nimport API from '../../utils/request';\nimport { toDateTString } from \"../../utils/date\";\nimport { numberFormat } from '../../utils/number';\nimport { Button } from 'primereact/button';\nimport { Dialog } from 'primereact/dialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AccountSessionPage() {\n  _s();\n\n  const [data, setData] = useState([]);\n  const [selectedRow, setSelectedRow] = useState({});\n  const [displayModal, setDisplayModal] = useState(false);\n  useEffect(() => {\n    API.get('/api/user/receipt/' + localStorage.getItem('id'), {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(res => {\n      setData(res.data.data);\n    }).catch(error => {\n      console.log(error);\n    });\n    setSelectedRow({});\n  }, []);\n\n  const setSelectedRowCustomize = e => {\n    console.log('sele');\n    console.log(e.value);\n    setSelectedRow(e.value);\n  };\n\n  const renderTotal = rowData => {\n    return numberFormat(rowData.cinemaPrice * rowData.tickets.length);\n  };\n\n  const showDetailReceipt = rowData => {\n    setSelectedRow(rowData);\n    setDisplayModal(true);\n  };\n\n  const actionBodyTemplate = rowData => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      placeholder: \"Chi ti\\u1EBFt ho\\xE1 \\u0111\\u01A1n\",\n      icon: \"pi pi-search\",\n      className: \"p-button-rounded p-button-info\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Th\\xF4ng tin ho\\xE1 \\u0111\\u01A1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 37\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      header: 'Chi tiết hoá đơn',\n      onHide: () => setDisplayModal(false),\n      visible: displayModal,\n      breakpoints: {\n        '960px': '75vw',\n        '640px': '100vw'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Hello\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(DataTable, {\n        value: data,\n        paginator: true,\n        rows: 10,\n        selection: selectedRow,\n        onSelectionChange: setSelectedRowCustomize,\n        selectionMode: \"single\",\n        dataKey: \"id\",\n        stateStorage: \"local\",\n        stateKey: \"dt-state-demo-local\",\n        emptyMessage: \"Kh\\xF4ng c\\xF3 ho\\xE1 \\u0111\\u01A1n\",\n        children: [/*#__PURE__*/_jsxDEV(Column, {\n          field: \"movieName\",\n          header: \"T\\xEAn phim\",\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"cinemaName\",\n          header: \"R\\u1EA1p s\\u1ED1\",\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"cinemaType\",\n          header: \"Lo\\u1EA1i r\\u1EA1p\",\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"showTime\",\n          header: \"Ng\\xE0y gi\\u1EDD chi\\u1EBFu\",\n          body: rowData => toDateTString(rowData.showTime),\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"createdDate\",\n          header: \"Ng\\xE0y \\u0111\\u1EB7t\",\n          body: rowData => toDateTString(rowData.createdDate),\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"price\",\n          header: \"T\\u1ED5ng ti\\u1EC1n\",\n          body: rowData => renderTotal(rowData),\n          style: {\n            right: '0px'\n          },\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          body: rowData => actionBodyTemplate(rowData),\n          headerStyle: {\n            width: '8em',\n            textAlign: 'center'\n          },\n          bodyStyle: {\n            textAlign: 'center',\n            overflow: 'visible'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AccountSessionPage, \"vvMHoQLHl/HQIC+lUd99OP1smLQ=\");\n\n_c = AccountSessionPage;\nexport default AccountSessionPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountSessionPage\");","map":{"version":3,"sources":["P:/Thuc-tap/GreenMovie-V3.0/frontend/admin/src/containers/User/AccountSessionPage/AccountSessionPage.js"],"names":["DataTable","Column","React","useState","useEffect","API","toDateTString","numberFormat","Button","Dialog","AccountSessionPage","data","setData","selectedRow","setSelectedRow","displayModal","setDisplayModal","get","localStorage","getItem","headers","then","res","catch","error","console","log","setSelectedRowCustomize","e","value","renderTotal","rowData","cinemaPrice","tickets","length","showDetailReceipt","actionBodyTemplate","textAlign","showTime","createdDate","right","width","overflow"],"mappings":"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","sourcesContent":["import { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport React, { useState,useEffect } from 'react';\r\nimport API from '../../utils/request';\r\nimport { toDateTString } from \"../../utils/date\";\r\nimport {numberFormat} from '../../utils/number';\r\nimport { Button } from 'primereact/button';\r\nimport { Dialog } from 'primereact/dialog';\r\n\r\nfunction AccountSessionPage() {\r\n    const [data, setData] = useState([]);\r\n    const [selectedRow, setSelectedRow] = useState({});\r\n    const [displayModal, setDisplayModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        API.get('/api/user/receipt/'+localStorage.getItem('id'), \r\n        {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }})\r\n            .then((res) =>{\r\n                setData(res.data.data);\r\n            })\r\n            .catch((error)=>{\r\n                console.log(error);\r\n        });\r\n        setSelectedRow({});\r\n    }, []);\r\n\r\n    const setSelectedRowCustomize = (e) => {\r\n        console.log('sele');\r\n        console.log(e.value);\r\n        setSelectedRow(e.value);\r\n    };\r\n\r\n    const renderTotal = (rowData) =>{\r\n        return numberFormat(rowData.cinemaPrice * rowData.tickets.length);\r\n    }\r\n\r\n    const showDetailReceipt = (rowData) =>{\r\n        setSelectedRow(rowData);\r\n        setDisplayModal(true);\r\n    }\r\n\r\n    const actionBodyTemplate = (rowData) => {\r\n        return (\r\n            <Button type=\"button\" placeholder=\"Chi tiết hoá đơn\" icon=\"pi pi-search\" className=\"p-button-rounded p-button-info\"></Button>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{textAlign:'center'}}>\r\n            <div className=\"p-mb-4\"><h2>Thông tin hoá đơn</h2></div>\r\n            <Dialog header={'Chi tiết hoá đơn'} onHide={() => setDisplayModal(false)} visible={displayModal} breakpoints={{'960px': '75vw', '640px': '100vw'}}>\r\n                    <h2>Hello</h2>\r\n            </Dialog>\r\n            <div className=\"card\">\r\n                <DataTable value={data} paginator rows={10}\r\n                    selection={selectedRow} \r\n                    onSelectionChange={setSelectedRowCustomize} \r\n                    selectionMode=\"single\" \r\n                    dataKey=\"id\"\r\n                    stateStorage=\"local\" \r\n                    stateKey=\"dt-state-demo-local\"\r\n                    emptyMessage=\"Không có hoá đơn\">\r\n                    <Column field=\"movieName\" header=\"Tên phim\" sortable ></Column>\r\n                    <Column field=\"cinemaName\" header=\"Rạp số\" sortable ></Column>\r\n                    <Column field=\"cinemaType\" header=\"Loại rạp\" sortable ></Column>\r\n                    <Column field=\"showTime\" header=\"Ngày giờ chiếu\" body={(rowData) => toDateTString(rowData.showTime)} sortable ></Column>\r\n                    <Column field=\"createdDate\" header=\"Ngày đặt\" body={(rowData) => toDateTString(rowData.createdDate)} sortable></Column>\r\n                    <Column field=\"price\" header=\"Tổng tiền\" body={(rowData) => renderTotal(rowData)} style={{right: '0px'}} sortable ></Column>\r\n                    <Column body={(rowData) => actionBodyTemplate(rowData)} headerStyle={{width: '8em', textAlign: 'center'}} bodyStyle={{textAlign: 'center', overflow: 'visible'}} />\r\n                </DataTable>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AccountSessionPage\r\n"]},"metadata":{},"sourceType":"module"}