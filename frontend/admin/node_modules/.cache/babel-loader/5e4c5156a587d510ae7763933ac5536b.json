{"ast":null,"code":"var _jsxFileName = \"P:\\\\Thuc-tap\\\\GreenMovie-V3.0\\\\frontend\\\\admin\\\\src\\\\containers\\\\User\\\\AccountSessionPage\\\\AccountSessionPage.js\",\n    _s = $RefreshSig$();\n\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport React, { useState, useEffect } from 'react';\nimport API from '../../utils/request';\nimport { toDateTString } from \"../../utils/date\";\nimport { numberFormat } from '../../utils/number';\nimport { Button } from 'primereact/button';\nimport { Dialog } from 'primereact/dialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AccountSessionPage() {\n  _s();\n\n  var _selectedRow$tickets2, _selectedRow$tickets3;\n\n  const [data, setData] = useState([]);\n  const [selectedRow, setSelectedRow] = useState({});\n  const [displayModal, setDisplayModal] = useState(false);\n  useEffect(() => {\n    API.get('/api/user/receipt/' + localStorage.getItem('id'), {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(res => {\n      setData(res.data.data);\n    }).catch(error => {\n      console.log(error);\n    });\n    setSelectedRow({});\n  }, []);\n\n  const setSelectedRowCustomize = e => {\n    setSelectedRow(e.value);\n  };\n\n  const renderTotal = rowData => {\n    return numberFormat(rowData.cinemaPrice * rowData.tickets.length);\n  };\n\n  const showDetailReceipt = rowData => {\n    setSelectedRow({ ...rowData\n    });\n    setDisplayModal(true);\n  };\n\n  const actionBodyTemplate = rowData => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      placeholder: \"Chi ti\\u1EBFt ho\\xE1 \\u0111\\u01A1n\",\n      icon: \"pi pi-search\",\n      onClick: rowData => showDetailReceipt(rowData),\n      className: \"p-button-rounded p-button-info\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this);\n  };\n\n  const renderNameSeat = () => {\n    var _selectedRow$tickets;\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: (_selectedRow$tickets = selectedRow.tickets) === null || _selectedRow$tickets === void 0 ? void 0 : _selectedRow$tickets.map((ele, index) => {\n        return (index > 0 ? ',' : '') + ele;\n      })\n    }, void 0, false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Th\\xF4ng tin ho\\xE1 \\u0111\\u01A1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 37\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      header: 'Chi tiết hoá đơn',\n      onHide: () => setDisplayModal(false),\n      visible: displayModal,\n      breakpoints: {\n        '960px': '75vw',\n        '640px': '100vw'\n      },\n      style: {\n        width: '50vw'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid p-col-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-6\",\n          children: [\"T\\xEAn phim: \", selectedRow === null || selectedRow === void 0 ? void 0 : selectedRow.movieName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-6\",\n          children: [\"Ng\\xE0y gi\\u1EDD: \", toDateTString(selectedRow === null || selectedRow === void 0 ? void 0 : selectedRow.showTime)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid p-col-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-6\",\n          children: [\"R\\u1EA1p s\\u1ED1: \", selectedRow === null || selectedRow === void 0 ? void 0 : selectedRow.cinemaName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-6\",\n          children: [\"Lo\\u1EA1i r\\u1EA1p: \", selectedRow === null || selectedRow === void 0 ? void 0 : selectedRow.cinemaType]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid p-col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-12\",\n          children: [\"Gh\\u1EBF: \", /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: renderNameSeat()\n          }, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid p-col-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-6\",\n          children: [\"S\\u1ED1 l\\u01B0\\u1EE3ng v\\xE9: \", selectedRow === null || selectedRow === void 0 ? void 0 : (_selectedRow$tickets2 = selectedRow.tickets) === null || _selectedRow$tickets2 === void 0 ? void 0 : _selectedRow$tickets2.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-6\",\n          children: [\"Th\\xE0nh ti\\u1EC1n: \", numberFormat((selectedRow === null || selectedRow === void 0 ? void 0 : selectedRow.cinemaPrice) * (selectedRow === null || selectedRow === void 0 ? void 0 : (_selectedRow$tickets3 = selectedRow.tickets) === null || _selectedRow$tickets3 === void 0 ? void 0 : _selectedRow$tickets3.length))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid p-col-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-6\",\n          children: [\"Thanh to\\xE1n: \", (selectedRow === null || selectedRow === void 0 ? void 0 : selectedRow.paymentType) == 0 ? 'Tiền mặt khi nhận vé' : 'Qua thẻ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-col-6\",\n          children: [\"Tr\\u1EA1ng th\\xE1i: \", (selectedRow === null || selectedRow === void 0 ? void 0 : selectedRow.isGetTicket) ? /*#__PURE__*/_jsxDEV(Button, {\n            label: \"\\u0110\\xC3 L\\u1EA4Y\",\n            className: \"p-button-success\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            label: \"CH\\u01AFA L\\u1EA4Y\",\n            className: \"p-button-warning\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(DataTable, {\n        value: data,\n        paginator: true,\n        rows: 10,\n        selection: selectedRow,\n        onSelectionChange: setSelectedRowCustomize,\n        selectionMode: \"single\",\n        dataKey: \"id\",\n        stateStorage: \"local\",\n        stateKey: \"dt-state-demo-local\",\n        emptyMessage: \"Kh\\xF4ng c\\xF3 ho\\xE1 \\u0111\\u01A1n\",\n        children: [/*#__PURE__*/_jsxDEV(Column, {\n          field: \"movieName\",\n          header: \"T\\xEAn phim\",\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"cinemaName\",\n          header: \"R\\u1EA1p s\\u1ED1\",\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"cinemaType\",\n          header: \"Lo\\u1EA1i r\\u1EA1p\",\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"showTime\",\n          header: \"Ng\\xE0y gi\\u1EDD chi\\u1EBFu\",\n          body: rowData => toDateTString(rowData.showTime),\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"createdDate\",\n          header: \"Ng\\xE0y \\u0111\\u1EB7t\",\n          body: rowData => toDateTString(rowData.createdDate),\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          field: \"price\",\n          header: \"T\\u1ED5ng ti\\u1EC1n\",\n          body: rowData => renderTotal(rowData),\n          style: {\n            right: '0px'\n          },\n          sortable: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          body: rowData => actionBodyTemplate(rowData),\n          headerStyle: {\n            width: '8em',\n            textAlign: 'center'\n          },\n          bodyStyle: {\n            textAlign: 'center',\n            overflow: 'visible'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AccountSessionPage, \"vvMHoQLHl/HQIC+lUd99OP1smLQ=\");\n\n_c = AccountSessionPage;\nexport default AccountSessionPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountSessionPage\");","map":{"version":3,"sources":["P:/Thuc-tap/GreenMovie-V3.0/frontend/admin/src/containers/User/AccountSessionPage/AccountSessionPage.js"],"names":["DataTable","Column","React","useState","useEffect","API","toDateTString","numberFormat","Button","Dialog","AccountSessionPage","data","setData","selectedRow","setSelectedRow","displayModal","setDisplayModal","get","localStorage","getItem","headers","then","res","catch","error","console","log","setSelectedRowCustomize","e","value","renderTotal","rowData","cinemaPrice","tickets","length","showDetailReceipt","actionBodyTemplate","renderNameSeat","map","ele","index","textAlign","width","movieName","showTime","cinemaName","cinemaType","paymentType","isGetTicket","createdDate","right","overflow"],"mappings":"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","sourcesContent":["import { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport React, { useState,useEffect } from 'react';\r\nimport API from '../../utils/request';\r\nimport { toDateTString } from \"../../utils/date\";\r\nimport {numberFormat} from '../../utils/number';\r\nimport { Button } from 'primereact/button';\r\nimport { Dialog } from 'primereact/dialog';\r\n\r\nfunction AccountSessionPage() {\r\n    const [data, setData] = useState([]);\r\n    const [selectedRow, setSelectedRow] = useState({});\r\n    const [displayModal, setDisplayModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        API.get('/api/user/receipt/'+localStorage.getItem('id'), \r\n        {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }})\r\n            .then((res) =>{\r\n                setData(res.data.data);\r\n            })\r\n            .catch((error)=>{\r\n                console.log(error);\r\n        });\r\n        setSelectedRow({});\r\n    }, []);\r\n\r\n    const setSelectedRowCustomize = (e) => {\r\n        setSelectedRow(e.value);\r\n    };\r\n\r\n    const renderTotal = (rowData) =>{\r\n        return numberFormat(rowData.cinemaPrice * rowData.tickets.length);\r\n    }\r\n\r\n    const showDetailReceipt = (rowData) =>{\r\n        setSelectedRow({...rowData})\r\n        setDisplayModal(true);\r\n    }\r\n\r\n    const actionBodyTemplate = (rowData) => {\r\n        return (\r\n            <Button type=\"button\" placeholder=\"Chi tiết hoá đơn\" icon=\"pi pi-search\" onClick={(rowData) => showDetailReceipt(rowData)} className=\"p-button-rounded p-button-info\"></Button>\r\n        );\r\n    }\r\n\r\n    const renderNameSeat = () =>{\r\n        return(<>\r\n            {selectedRow.tickets?.map((ele,index)=>{\r\n                return (index > 0 ? ',':'')+ele;\r\n            })}\r\n        </>);\r\n    }\r\n\r\n    return (\r\n        <div style={{textAlign:'center'}}>\r\n            <div className=\"p-mb-4\"><h2>Thông tin hoá đơn</h2></div>\r\n            <Dialog header={'Chi tiết hoá đơn'} onHide={() => setDisplayModal(false)} visible={displayModal} \r\n            breakpoints={{'960px': '75vw', '640px': '100vw'}} style={{width: '50vw'}}>\r\n            \r\n                <div className=\"p-grid p-col-12\">\r\n                    <div className=\"p-col-6\">\r\n                        Tên phim: {selectedRow?.movieName}\r\n                    </div>\r\n                    <div className=\"p-col-6\">\r\n                        Ngày giờ: {toDateTString(selectedRow?.showTime)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"p-grid p-col-12\">\r\n                    <div className=\"p-col-6\">\r\n                        Rạp số: {selectedRow?.cinemaName}\r\n                    </div>\r\n                    <div className=\"p-col-6\">\r\n                        Loại rạp: {selectedRow?.cinemaType}\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div className=\"p-grid p-col-12\" >\r\n                    <div className=\"p-col-12\">\r\n                        Ghế: <>{renderNameSeat()}</>\r\n                    </div>\r\n                </div>\r\n                <div className=\"p-grid p-col-12\" >\r\n                    <div className=\"p-col-6\">\r\n                        Số lượng vé: {selectedRow?.tickets?.length}\r\n                    </div>\r\n                    <div className=\"p-col-6\">\r\n                        Thành tiền: {numberFormat(selectedRow?.cinemaPrice * selectedRow?.tickets?.length)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"p-grid p-col-12\">\r\n                    <div className=\"p-col-6\">\r\n                        Thanh toán: {selectedRow?.paymentType == 0 ? 'Tiền mặt khi nhận vé' : 'Qua thẻ'}\r\n                    </div>\r\n                    <div className=\"p-col-6\">\r\n                        Trạng thái: {selectedRow?.isGetTicket ? \r\n                        <Button label=\"ĐÃ LẤY\" className=\"p-button-success\" />:\r\n                        <Button label=\"CHƯA LẤY\" className=\"p-button-warning\" />}\r\n                    </div>                    \r\n                </div>\r\n            </Dialog>\r\n            <div className=\"card\">\r\n                <DataTable value={data} paginator rows={10}\r\n                    selection={selectedRow} \r\n                    onSelectionChange={setSelectedRowCustomize} \r\n                    selectionMode=\"single\" \r\n                    dataKey=\"id\"\r\n                    stateStorage=\"local\" \r\n                    stateKey=\"dt-state-demo-local\"\r\n                    emptyMessage=\"Không có hoá đơn\">\r\n                    <Column field=\"movieName\" header=\"Tên phim\" sortable ></Column>\r\n                    <Column field=\"cinemaName\" header=\"Rạp số\" sortable ></Column>\r\n                    <Column field=\"cinemaType\" header=\"Loại rạp\" sortable ></Column>\r\n                    <Column field=\"showTime\" header=\"Ngày giờ chiếu\" body={(rowData) => toDateTString(rowData.showTime)} sortable ></Column>\r\n                    <Column field=\"createdDate\" header=\"Ngày đặt\" body={(rowData) => toDateTString(rowData.createdDate)} sortable></Column>\r\n                    <Column field=\"price\" header=\"Tổng tiền\" body={(rowData) => renderTotal(rowData)} style={{right: '0px'}} sortable ></Column>\r\n                    <Column body={(rowData) => actionBodyTemplate(rowData)} headerStyle={{width: '8em', textAlign: 'center'}} bodyStyle={{textAlign: 'center', overflow: 'visible'}} />\r\n                </DataTable>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AccountSessionPage\r\n"]},"metadata":{},"sourceType":"module"}