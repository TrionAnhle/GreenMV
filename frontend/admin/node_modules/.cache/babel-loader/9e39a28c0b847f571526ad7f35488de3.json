{"ast":null,"code":"var _jsxFileName = \"P:\\\\Thuc-tap\\\\GreenMovie-V3.0\\\\frontend\\\\admin\\\\src\\\\containers\\\\User\\\\UserSession\\\\UserSession.js\",\n    _s = $RefreshSig$();\n\nimport Header from '../../Header/Header';\nimport Footer from '../../../components/Footer/Footer';\nimport { Button } from 'primereact/button';\nimport { useState, useEffect, useRef } from 'react';\nimport API from '../../utils/request';\nimport { toTimeString } from '../../utils/date';\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction UserSession() {\n  _s();\n\n  const [index, setIndex] = useState(0);\n  const [data, setData] = useState([]);\n  const [sessions, setSessions] = useState([]);\n  const history = useHistory();\n  useEffect(() => {\n    if (localStorage.getItem('token') == null) history.push(\"/login\");\n    API.post('/api/user/customer/username', {\n      username: localStorage.getItem('username')\n    }, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).catch(error => {\n      if (error.response.status === 401) {\n        history.push(\"/login\");\n      }\n    });\n    let lstDate = [];\n\n    for (let i = 0; i < 7; i++) {\n      let date = new Date();\n      date.setDate(date.getDate() + i);\n      let d = {\n        id: i,\n        value: date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate(),\n        label: getDayOfWeek(date) + ' ' + date.getDate() + '/' + (date.getMonth() + 1)\n      };\n      lstDate.push(d);\n    }\n\n    setData(lstDate);\n  }, []);\n  useEffect(() => {\n    let date = new Date();\n    let time = '';\n\n    if (data.length == 0) {\n      time = date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds();\n    } else {\n      if (index == 0) time = date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds();else time = '';\n    }\n\n    let body = {\n      date: data.length == 0 ? date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate() : data[index].value,\n      time: time\n    };\n    API.post('/api/public/session/inday', body).then(res => {\n      if (res.data.data.length > 0) {\n        let arr = res.data.data;\n        setSessions(convertData(arr));\n      } else {\n        setSessions([]);\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [index]);\n\n  const convertData = arr => {\n    let lst = [];\n\n    for (let i = 0; i < arr.length; i++) {\n      let movie = {};\n      movie[\"id\"] = arr[i].movie.id;\n      movie[\"name\"] = arr[i].movie.name;\n      movie[\"pathThumbnail\"] = arr[i].movie.pathThumbnail;\n      let lstSession = [];\n      let s = {};\n      s[\"id\"] = arr[i].id;\n      s[\"time\"] = toTimeString(arr[i].showTime);\n      lstSession.push(s);\n\n      if (i + 1 < arr.length) {\n        while (arr[i].movie.id == arr[i + 1].movie.id) {\n          let session = {};\n          session[\"id\"] = arr[i + 1].id;\n          session[\"time\"] = toTimeString(arr[i + 1].showTime);\n          lstSession.push(session);\n          i++;\n        }\n      }\n\n      movie[\"session\"] = lstSession;\n      lst.push(movie);\n    }\n\n    return lst;\n  };\n\n  const getDayOfWeek = day => {\n    return day.getDay() === 0 ? 'Chủ nhật' : 'Thứ ' + (day.getDay() + 1);\n  };\n\n  const showLstButton = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: data.map((ele, i) => {\n        return /*#__PURE__*/_jsxDEV(Button, {\n          label: ele.label,\n          className: 'p-button-rounded p-button-success p-mr-5 p-mb-2 ' + (index == ele.id ? '' : 'p-button-outlined'),\n          onClick: () => setIndex(ele.id)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this);\n  };\n\n  const redirectSessionDetail = ele => {\n    history.push(\"/movie/session/\" + ele.id);\n  };\n\n  const renderListItem = lst => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: lst.map((ele, index) => {\n        return /*#__PURE__*/_jsxDEV(Button, {\n          label: ele.time,\n          className: \"p-button-rounded p-button-info p-mr-2\",\n          onClick: () => redirectSessionDetail(ele)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 28\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this);\n  };\n\n  const showListSession = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: sessions.length == 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid p-col-12\",\n        style: {\n          justifyContent: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Kh\\xF4ng c\\xF3 su\\u1EA5t chi\\u1EBFu n\\xE0o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 85\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this) : sessions.map((ele, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-grid p-col-12 p-mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-3 p-sm-12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-3 p-sm-12\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: ele.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 70\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-12 p-md-6 p-sm-12\",\n            children: renderListItem(ele.session)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 29\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body-container\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid\",\n      style: {\n        justifyContent: 'center'\n      },\n      children: showLstButton()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this), showListSession(), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 9\n  }, this);\n}\n\n_s(UserSession, \"/chd6iwMZ9GwotC4rioGeDNhjpc=\", false, function () {\n  return [useHistory];\n});\n\n_c = UserSession;\nexport default UserSession;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserSession\");","map":{"version":3,"sources":["P:/Thuc-tap/GreenMovie-V3.0/frontend/admin/src/containers/User/UserSession/UserSession.js"],"names":["Header","Footer","Button","useState","useEffect","useRef","API","toTimeString","useHistory","UserSession","index","setIndex","data","setData","sessions","setSessions","history","localStorage","getItem","push","post","username","headers","catch","error","response","status","lstDate","i","date","Date","setDate","getDate","d","id","value","getFullYear","getMonth","label","getDayOfWeek","time","length","getHours","getMinutes","getSeconds","body","then","res","arr","convertData","console","log","lst","movie","name","pathThumbnail","lstSession","s","showTime","session","day","getDay","showLstButton","map","ele","redirectSessionDetail","renderListItem","showListSession","justifyContent"],"mappings":"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","sourcesContent":["import Header from '../../Header/Header';\r\nimport Footer from '../../../components/Footer/Footer';\r\nimport { Button } from 'primereact/button';\r\nimport { useState,useEffect,useRef } from 'react';\r\nimport API from '../../utils/request';\r\nimport { toTimeString } from '../../utils/date'\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nfunction UserSession() {\r\n    const [index, setIndex] = useState(0);\r\n    const [data, setData] = useState([]);\r\n    const [sessions, setSessions] = useState([]);\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if(localStorage.getItem('token')==null)\r\n            history.push(\"/login\");\r\n        API.post('/api/user/customer/username', {username:localStorage.getItem('username')}, \r\n        {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }})\r\n        .catch((error)=>{\r\n            if(error.response.status === 401){\r\n                history.push(\"/login\");\r\n            }\r\n        });\r\n\r\n        let lstDate = [];\r\n        for (let i = 0; i < 7; i++) {\r\n            let date = new Date();\r\n            date.setDate(date.getDate() + i);\r\n            let d = {\r\n                id : i,\r\n                value: date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate(),\r\n                label: getDayOfWeek(date) +' '+date.getDate()+'/'+(date.getMonth()+1)\r\n            };\r\n            lstDate.push(d);\r\n        }\r\n        setData(lstDate);    \r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        let date = new Date();\r\n        let time = '';\r\n        if(data.length == 0){\r\n            time = date.getHours()+':'+date.getMinutes()+':'+date.getSeconds();\r\n        }else{\r\n            if(index == 0) time = date.getHours()+':'+date.getMinutes()+':'+date.getSeconds();\r\n            else time = '';\r\n        }\r\n\r\n        let body = {\r\n            date : (data.length == 0 ? (date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate()) : data[index].value),\r\n            time : time\r\n        }\r\n\r\n        API.post('/api/public/session/inday', body)\r\n            .then((res) =>{\r\n              if(res.data.data.length > 0){\r\n                let arr = res.data.data;\r\n                setSessions(convertData(arr));\r\n              }else{\r\n                setSessions([]);    \r\n              }\r\n            })\r\n            .catch((error)=>{\r\n                console.log(error);\r\n        });\r\n    }, [index]);\r\n\r\n    const convertData = (arr) =>{\r\n        let lst = [];\r\n        for(let i = 0; i<arr.length; i++){\r\n            let movie = {};\r\n            movie[\"id\"] = arr[i].movie.id\r\n            movie[\"name\"] = arr[i].movie.name;\r\n            movie[\"pathThumbnail\"] = arr[i].movie.pathThumbnail;\r\n            let lstSession = []\r\n            let s = {}\r\n            s[\"id\"] = arr[i].id;\r\n            s[\"time\"] = toTimeString(arr[i].showTime);\r\n            lstSession.push(s);\r\n            if( i+1 < arr.length){\r\n                while(arr[i].movie.id == arr[i+1].movie.id){\r\n                    let session = {}\r\n                    session[\"id\"] = arr[i+1].id;\r\n                    session[\"time\"] = toTimeString(arr[i+1].showTime);\r\n                    lstSession.push(session);\r\n                    i++;\r\n                }\r\n            }\r\n            movie[\"session\"] = lstSession;\r\n            lst.push(movie);\r\n        }\r\n\r\n        return lst;\r\n    }\r\n\r\n    const getDayOfWeek = (day) =>{\r\n        return (day.getDay() === 0 ? 'Chủ nhật' : 'Thứ '+(day.getDay()+1));\r\n    }\r\n\r\n    const showLstButton = () => {\r\n        return (\r\n            <div>\r\n                {data.map((ele, i) => {\r\n                    return (<Button label={ele.label} key={i} \r\n                    className={'p-button-rounded p-button-success p-mr-5 p-mb-2 '+(index == ele.id ? '' : 'p-button-outlined')}  \r\n                    onClick={() => setIndex(ele.id)}/>);\r\n                })}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const redirectSessionDetail = (ele) => {\r\n        history.push(\"/movie/session/\"+ele.id);\r\n    }\r\n\r\n    const renderListItem = (lst) =>{\r\n        return(\r\n            <div>\r\n                {lst.map((ele, index)=>{\r\n                    return <Button label={ele.time} key={index} \r\n                    className=\"p-button-rounded p-button-info p-mr-2\" \r\n                    onClick={() => redirectSessionDetail(ele)}/>\r\n                })}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const showListSession = () => {\r\n        return (\r\n            <div>\r\n                {sessions.length == 0 ?\r\n                <div className=\"p-grid p-col-12\" style={{justifyContent: 'center'}}><h3>Không có suất chiếu nào</h3></div> :\r\n                sessions.map((ele, index)=>{\r\n                    return(\r\n                        <div className=\"p-grid p-col-12 p-mb-3\" key={index}>\r\n                            <div className=\"p-col-12 p-md-3 p-sm-12\"></div>\r\n                            <div className=\"p-col-12 p-md-3 p-sm-12\"><h3>{ele.name}</h3></div>\r\n                            <div className=\"p-col-12 p-md-6 p-sm-12\">{renderListItem(ele.session)}</div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"body-container\">\r\n            <Header/>          \r\n            <div className=\"p-grid\" style={{justifyContent: 'center'}}>\r\n                {showLstButton()}\r\n            </div>\r\n            \r\n                {showListSession()}\r\n            \r\n            <Footer/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserSession\r\n"]},"metadata":{},"sourceType":"module"}