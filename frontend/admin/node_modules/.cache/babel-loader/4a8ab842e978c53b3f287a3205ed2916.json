{"ast":null,"code":"var _jsxFileName = \"P:\\\\Thuc-tap\\\\GreenMovie-V3.0\\\\frontend\\\\admin\\\\src\\\\containers\\\\Receipts\\\\Receipt.js\",\n    _s = $RefreshSig$();\n\nimport { Panel } from 'primereact/panel';\nimport React, { useState, useEffect, useRef } from 'react';\nimport API from '../utils/request';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { toDateTimeString } from \"../utils/date\";\nimport { numberFormat } from \"../utils/number\";\nimport { Button } from 'primereact/button';\nimport { Toast } from 'primereact/toast';\nimport { confirmDialog } from 'primereact/confirmdialog';\nimport { Dialog } from 'primereact/dialog';\nimport { useFormik } from 'formik';\nimport { InputText } from 'primereact/inputtext';\nimport { Password } from 'primereact/password';\nimport { Dropdown } from 'primereact/dropdown';\nimport { InputNumber } from 'primereact/inputnumber';\nimport { APPCONFIG } from '../utils/constants';\nimport { FileUpload } from 'primereact/fileupload';\nimport { Checkbox } from 'primereact/checkbox';\nimport { InputTextarea } from 'primereact/inputtextarea';\nimport QrReader from 'react-qr-reader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Receipt() {\n  _s();\n\n  const [result, setResult] = useState('Not Found');\n  const toast = useRef(null);\n  const [data, setData] = useState({});\n  const [tickets, setTickets] = useState([]);\n  const [selectedList, setSelectedList] = useState({});\n  const [displayModal, setDisplayModal] = useState(false);\n  const [showcomp, setShowcomp] = useState();\n  useEffect(() => {\n    reloadData();\n  }, []);\n\n  const setSelectedRowCustomize = e => {\n    setSelectedList(e.value);\n  };\n\n  const reloadData = () => {\n    API.get('/api/admin/receipt', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(res => {\n      setData(res.data.data);\n    }).catch(error => {\n      console.log(error);\n    });\n    setSelectedList({});\n  };\n\n  const formik = useFormik({\n    initialValues: {\n      id: '',\n      name: '',\n      description: '',\n      pathVideo: '',\n      screenTime: 0,\n      isShowing: true,\n      categoryId: '',\n      pathThumbnail: '',\n      base64: ''\n    },\n    validate: data => {\n      const errors = {};\n      return errors;\n    },\n    onSubmit: data => {\n      console.log(data); // API.post('/api/admin/movie', data, \n      // {\n      //     headers: {\n      //         'Authorization': `Bearer ${localStorage.getItem('token')}`\n      // }})\n      //     .then((res) =>{\n      //         if(res.data.ok){\n      //             toast.current.show({severity:'success', summary: 'Thông báo', detail: res.data.message, life: 3000});\n      //             reloadData();\n      //             setDisplayModal(false);\n      //         }else{\n      //             toast.current.show({severity:'warn', summary: 'Thông báo', detail: res.data.message, life: 3000});\n      //         }\n      //     })\n      //     .catch((error)=>{\n      //         console.log(error);\n      //         toast.current.show({severity:'error', summary: 'Thông báo', detail:'Lỗi hệ thống', life: 3000});\n      // });\n    }\n  });\n\n  const statusBodyTemplate = rowData => {\n    return rowData.isGetTicket == 0 ? /*#__PURE__*/_jsxDEV(Button, {\n      label: \"CH\\u01AFA L\\u1EA4Y\",\n      className: \"p-button-warning\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n      label: \"\\u0110\\xC3 L\\u1EA4Y\",\n      className: \"p-button-success\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this);\n  };\n\n  const statusPaymentType = rowData => {\n    return rowData.paymentType == 0 ? 'Tiền mặt' : 'Qua Thẻ';\n  };\n\n  const handleScan = data => {\n    if (data) {\n      setResult(data);\n    }\n  };\n\n  const handleError = err => {\n    console.error(err);\n  };\n\n  const getListTicket = async () => {\n    API.get('/api/admin/receipt/' + result, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(res => {\n      setTickets(res.data.data[0]);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const showListTicket = () => {\n    // const status = ( tickets.isGetTicket == 0 ?\n    //     <Button label=\"CHƯA LẤY\" className=\"p-button-warning\" /> : \n    //     <Button label=\"ĐÃ LẤY\" className=\"p-button-success\" />);\n    setShowcomp( /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-gird\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-grid\",\n        children: tickets.isGetTicket ? 'Đã Lấy' : 'Chưa lấy'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }, this));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Panel, {\n    header: \"Danh s\\xE1ch c\\xE1c phim\",\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      ref: toast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-field p-mr-2\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          label: \"Qu\\xE9t m\\xE3\",\n          icon: \"pi pi-print\",\n          className: \"p-button-success\",\n          onClick: () => {\n            setDisplayModal(true);\n            setResult('Not Found');\n            setTickets({});\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid\",\n      children: /*#__PURE__*/_jsxDEV(Dialog, {\n        header: 'Quét mã',\n        maximizable: true,\n        onHide: () => {\n          setDisplayModal(false);\n          setResult('Not Found');\n          setTickets({});\n        },\n        visible: displayModal,\n        breakpoints: {\n          '960px': '75vw',\n          '640px': '100vw'\n        },\n        style: {\n          width: '50vw'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-6\",\n            children: /*#__PURE__*/_jsxDEV(QrReader, {\n              delay: 300,\n              onError: handleError,\n              onScan: handleScan,\n              style: {\n                width: '100%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-col-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-6\",\n                children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: [\"M\\xE3 Ho\\xE1 \\u0110\\u01A1n: \", result]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 58\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-col-6 p-mt-3\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  label: \"Nh\\u1EADn v\\xE9\",\n                  className: \"p-button-success\",\n                  onClick: () => showListTicket()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 65\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this), showcomp]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"datatable-templating-demo\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(DataTable, {\n          value: data,\n          paginator: true,\n          rows: 3,\n          scrollable: true,\n          scrollHeight: \"500px\",\n          selection: selectedList,\n          onSelectionChange: setSelectedRowCustomize,\n          selectionMode: \"single\",\n          dataKey: \"id\",\n          stateStorage: \"local\",\n          stateKey: \"dt-state-demo-local\",\n          emptyMessage: \"Kh\\xF4ng c\\xF3 ho\\xE1 \\u0111\\u01A1n n\\xE0o\",\n          children: [/*#__PURE__*/_jsxDEV(Column, {\n            field: \"id\",\n            header: \"M\\xE3 ho\\xE1 \\u0111\\u01A1n\",\n            sortable: true,\n            filter: true,\n            filterPlaceholder: \"Search by name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"customerName\",\n            header: \"T\\xEAn ng\\u01B0\\u1EDDi \\u0111\\u1EB7t\",\n            sortable: true,\n            filter: true,\n            filterPlaceholder: \"Search by name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"customerPhone\",\n            header: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n            sortable: true,\n            filter: true,\n            filterPlaceholder: \"Search by name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"paymentType\",\n            header: \"H\\xECnh th\\u1EE9c thanh to\\xE1n\",\n            body: statusPaymentType,\n            sortable: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"isGetTicket\",\n            header: \"Tr\\u1EA1ng th\\xE1i\",\n            sortable: true,\n            body: statusBodyTemplate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"paymentDate\",\n            header: \"Ng\\xE0y thanh to\\xE1n\",\n            body: rowData => toDateTimeString(rowData.paymentDate),\n            sortable: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"createdDate\",\n            header: \"Ng\\xE0y t\\u1EA1o\",\n            body: rowData => toDateTimeString(rowData.createdDate),\n            sortable: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"createdBy\",\n            header: \"Ng\\u01B0\\u1EDDi t\\u1EA1o\",\n            sortable: true,\n            filterPlaceholder: \"Search by name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"updateDate\",\n            header: \"Ng\\xE0y c\\u1EADp nh\\u1EADt\",\n            body: rowData => toDateTimeString(rowData.updateDate),\n            sortable: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"updateBy\",\n            header: \"Ng\\u01B0\\u1EDDi c\\u1EADp nh\\u1EADt\",\n            sortable: true,\n            filterPlaceholder: \"Search by name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Receipt, \"nhVl3ehZYKueFAaU8KRInVBj3Mo=\", false, function () {\n  return [useFormik];\n});\n\n_c = Receipt;\n\nvar _c;\n\n$RefreshReg$(_c, \"Receipt\");","map":{"version":3,"sources":["P:/Thuc-tap/GreenMovie-V3.0/frontend/admin/src/containers/Receipts/Receipt.js"],"names":["Panel","React","useState","useEffect","useRef","API","DataTable","Column","toDateTimeString","numberFormat","Button","Toast","confirmDialog","Dialog","useFormik","InputText","Password","Dropdown","InputNumber","APPCONFIG","FileUpload","Checkbox","InputTextarea","QrReader","Receipt","result","setResult","toast","data","setData","tickets","setTickets","selectedList","setSelectedList","displayModal","setDisplayModal","showcomp","setShowcomp","reloadData","setSelectedRowCustomize","e","value","get","headers","localStorage","getItem","then","res","catch","error","console","log","formik","initialValues","id","name","description","pathVideo","screenTime","isShowing","categoryId","pathThumbnail","base64","validate","errors","onSubmit","statusBodyTemplate","rowData","isGetTicket","statusPaymentType","paymentType","handleScan","handleError","err","getListTicket","showListTicket","width","paymentDate","createdDate","updateDate"],"mappings":";;;AAAA,SAASA,KAAT,QAAsB,kBAAtB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAAyBC,SAAzB,EAAmCC,MAAnC,QAAiD,OAAjD;AACA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,SAASC,SAAT,QAA0B,sBAA1B;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,gBAAT,QAAiC,eAAjC;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,SAAT,QAA0B,QAA1B;AACA,SAASC,SAAT,QAA0B,sBAA1B;AACA,SAAQC,QAAR,QAAuB,qBAAvB;AAEA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,UAAT,QAA2B,uBAA3B;AACA,SAAQC,QAAR,QAAuB,qBAAvB;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,OAAOC,QAAP,MAAqB,iBAArB;;AAEA,eAAe,SAASC,OAAT,GAAmB;AAAA;;AAC9B,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBxB,QAAQ,CAAC,WAAD,CAApC;AAEA,QAAMyB,KAAK,GAAGvB,MAAM,CAAC,IAAD,CAApB;AACA,QAAM,CAACwB,IAAD,EAAOC,OAAP,IAAkB3B,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAAC4B,OAAD,EAASC,UAAT,IAAuB7B,QAAQ,CAAC,EAAD,CAArC;AACA,QAAM,CAAC8B,YAAD,EAAeC,eAAf,IAAkC/B,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACgC,YAAD,EAAeC,eAAf,IAAkCjC,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACkC,QAAD,EAAWC,WAAX,IAA0BnC,QAAQ,EAAxC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZmC,IAAAA,UAAU;AACb,GAFQ,EAEN,EAFM,CAAT;;AAKA,QAAMC,uBAAuB,GAAIC,CAAD,IAAO;AACnCP,IAAAA,eAAe,CAACO,CAAC,CAACC,KAAH,CAAf;AACH,GAFD;;AAIA,QAAMH,UAAU,GAAI,MAAK;AACrBjC,IAAAA,GAAG,CAACqC,GAAJ,CAAQ,oBAAR,EACA;AACIC,MAAAA,OAAO,EAAE;AACL,yBAAkB,UAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AADpD;AADb,KADA,EAKKC,IALL,CAKWC,GAAD,IAAQ;AACVlB,MAAAA,OAAO,CAACkB,GAAG,CAACnB,IAAJ,CAASA,IAAV,CAAP;AACH,KAPL,EAQKoB,KARL,CAQYC,KAAD,IAAS;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACP,KAVD;AAWAhB,IAAAA,eAAe,CAAC,EAAD,CAAf;AACH,GAbD;;AAkBA,QAAMmB,MAAM,GAAGtC,SAAS,CAAC;AACrBuC,IAAAA,aAAa,EAAE;AACXC,MAAAA,EAAE,EAAE,EADO;AAEXC,MAAAA,IAAI,EAAE,EAFK;AAGXC,MAAAA,WAAW,EAAE,EAHF;AAIXC,MAAAA,SAAS,EAAE,EAJA;AAKXC,MAAAA,UAAU,EAAE,CALD;AAMXC,MAAAA,SAAS,EAAE,IANA;AAOXC,MAAAA,UAAU,EAAE,EAPD;AAQXC,MAAAA,aAAa,EAAG,EARL;AASXC,MAAAA,MAAM,EAAE;AATG,KADM;AAYrBC,IAAAA,QAAQ,EAAGnC,IAAD,IAAU;AAChB,YAAMoC,MAAM,GAAG,EAAf;AAEA,aAAOA,MAAP;AACH,KAhBoB;AAiBrBC,IAAAA,QAAQ,EAAGrC,IAAD,IAAU;AAChBsB,MAAAA,OAAO,CAACC,GAAR,CAAYvB,IAAZ,EADgB,CAGhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACH;AAvCoB,GAAD,CAAxB;;AA4CA,QAAMsC,kBAAkB,GAAIC,OAAD,IAAa;AACpC,WAASA,OAAO,CAACC,WAAR,IAAuB,CAAvB,gBACL,QAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,oBAAd;AAAyB,MAAA,SAAS,EAAC;AAAnC;AAAA;AAAA;AAAA;AAAA,YADK,gBAEL,QAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,qBAAd;AAAuB,MAAA,SAAS,EAAC;AAAjC;AAAA;AAAA;AAAA;AAAA,YAFJ;AAGH,GAJD;;AAMA,QAAMC,iBAAiB,GAAIF,OAAD,IAAa;AACnC,WAAQA,OAAO,CAACG,WAAR,IAAuB,CAAvB,GAA2B,UAA3B,GAAwC,SAAhD;AACH,GAFD;;AAIA,QAAMC,UAAU,GAAG3C,IAAI,IAAI;AACvB,QAAIA,IAAJ,EAAU;AACRF,MAAAA,SAAS,CAACE,IAAD,CAAT;AACD;AACF,GAJH;;AAKA,QAAM4C,WAAW,GAAGC,GAAG,IAAI;AACvBvB,IAAAA,OAAO,CAACD,KAAR,CAAcwB,GAAd;AACH,GAFD;;AAIA,QAAMC,aAAa,GAAG,YAAW;AAC7BrE,IAAAA,GAAG,CAACqC,GAAJ,CAAQ,wBAAsBjB,MAA9B,EACA;AACIkB,MAAAA,OAAO,EAAE;AACL,yBAAkB,UAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AADpD;AADb,KADA,EAKKC,IALL,CAKWC,GAAD,IAAQ;AACVhB,MAAAA,UAAU,CAACgB,GAAG,CAACnB,IAAJ,CAASA,IAAT,CAAc,CAAd,CAAD,CAAV;AACH,KAPL,EAQKoB,KARL,CAQYC,KAAD,IAAS;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACP,KAVD;AAWH,GAZD;;AAcA,QAAM0B,cAAc,GAAG,MAAK;AACxB;AACA;AACA;AAEAtC,IAAAA,WAAW,eAAC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA,6BACA;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,kBAAyBP,OAAO,CAACsC,WAAR,GAAuB,QAAvB,GAAiC;AAA1D;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YAAD,CAAX;AAGH,GARD;;AAUA,sBACI,QAAC,KAAD;AAAO,IAAA,MAAM,EAAC,0BAAd;AAAA,4BACI,QAAC,KAAD;AAAO,MAAA,GAAG,EAAEzC;AAAZ;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,+BACI,QAAC,MAAD;AAAQ,UAAA,KAAK,EAAC,eAAd;AAAwB,UAAA,IAAI,EAAC,aAA7B;AAA2C,UAAA,SAAS,EAAC,kBAArD;AAAwE,UAAA,OAAO,EAAE,MAAM;AAACQ,YAAAA,eAAe,CAAC,IAAD,CAAf;AAAsBT,YAAAA,SAAS,CAAC,WAAD,CAAT;AAAuBK,YAAAA,UAAU,CAAC,EAAD,CAAV;AAAgB;AAArJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAFJ,eAOI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA,6BACI,QAAC,MAAD;AAAQ,QAAA,MAAM,EAAE,SAAhB;AAA2B,QAAA,WAAW,MAAtC;AAAuC,QAAA,MAAM,EAAE,MAAM;AAACI,UAAAA,eAAe,CAAC,KAAD,CAAf;AAAuBT,UAAAA,SAAS,CAAC,WAAD,CAAT;AAAuBK,UAAAA,UAAU,CAAC,EAAD,CAAV;AAAgB,SAApH;AAAsH,QAAA,OAAO,EAAEG,YAA/H;AAA8I,QAAA,WAAW,EAAE;AAAC,mBAAS,MAAV;AAAkB,mBAAS;AAA3B,SAA3J;AAAgM,QAAA,KAAK,EAAE;AAAC0C,UAAAA,KAAK,EAAE;AAAR,SAAvM;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,SAAf;AAAA,mCACI,QAAC,QAAD;AACI,cAAA,KAAK,EAAE,GADX;AAEI,cAAA,OAAO,EAAEJ,WAFb;AAGI,cAAA,MAAM,EAAED,UAHZ;AAII,cAAA,KAAK,EAAE;AAAEK,gBAAAA,KAAK,EAAE;AAAT;AAJX;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eASI;AAAK,YAAA,SAAS,EAAC,SAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,QAAf;AAAA,sCACI;AAAK,gBAAA,SAAS,EAAC,SAAf;AAAA,uCAAyB;AAAA,6DAAiBnD,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzB;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAK,gBAAA,SAAS,EAAC,gBAAf;AAAA,uCAAgC,QAAC,MAAD;AAAQ,kBAAA,KAAK,EAAC,iBAAd;AAAwB,kBAAA,SAAS,EAAC,kBAAlC;AAAqD,kBAAA,OAAO,EAAE,MAAMkD,cAAc;AAAlF;AAAA;AAAA;AAAA;AAAA;AAAhC;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAKKvC,QALL;AAAA;AAAA;AAAA;AAAA;AAAA,kBATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAPJ,eA6BI;AAAK,MAAA,SAAS,EAAC,2BAAf;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACI,QAAC,SAAD;AAAW,UAAA,KAAK,EAAER,IAAlB;AAAwB,UAAA,SAAS,MAAjC;AAAkC,UAAA,IAAI,EAAE,CAAxC;AAA2C,UAAA,UAAU,MAArD;AAAsD,UAAA,YAAY,EAAC,OAAnE;AACI,UAAA,SAAS,EAAEI,YADf;AAEI,UAAA,iBAAiB,EAAEO,uBAFvB;AAGI,UAAA,aAAa,EAAC,QAHlB;AAII,UAAA,OAAO,EAAC,IAJZ;AAKI,UAAA,YAAY,EAAC,OALjB;AAMI,UAAA,QAAQ,EAAC,qBANb;AAOI,UAAA,YAAY,EAAC,4CAPjB;AAAA,kCAQI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,IAAd;AAAmB,YAAA,MAAM,EAAC,4BAA1B;AAAuC,YAAA,QAAQ,MAA/C;AAAgD,YAAA,MAAM,MAAtD;AAAuD,YAAA,iBAAiB,EAAC;AAAzE;AAAA;AAAA;AAAA;AAAA,kBARJ,eASI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,cAAd;AAA6B,YAAA,MAAM,EAAC,sCAApC;AAAoD,YAAA,QAAQ,MAA5D;AAA6D,YAAA,MAAM,MAAnE;AAAoE,YAAA,iBAAiB,EAAC;AAAtF;AAAA;AAAA;AAAA;AAAA,kBATJ,eAUI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,eAAd;AAA8B,YAAA,MAAM,EAAC,mCAArC;AAAqD,YAAA,QAAQ,MAA7D;AAA8D,YAAA,MAAM,MAApE;AAAqE,YAAA,iBAAiB,EAAC;AAAvF;AAAA;AAAA;AAAA;AAAA,kBAVJ,eAWI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,aAAd;AAA4B,YAAA,MAAM,EAAC,iCAAnC;AAA0D,YAAA,IAAI,EAAE8B,iBAAhE;AAAmF,YAAA,QAAQ;AAA3F;AAAA;AAAA;AAAA;AAAA,kBAXJ,eAYI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,aAAd;AAA4B,YAAA,MAAM,EAAC,oBAAnC;AAAgD,YAAA,QAAQ,MAAxD;AAAyD,YAAA,IAAI,EAAEH;AAA/D;AAAA;AAAA;AAAA;AAAA,kBAZJ,eAaI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,aAAd;AAA4B,YAAA,MAAM,EAAC,uBAAnC;AAAqD,YAAA,IAAI,EAAGC,OAAD,IAAa3D,gBAAgB,CAAC2D,OAAO,CAACU,WAAT,CAAxF;AAA+G,YAAA,QAAQ;AAAvH;AAAA;AAAA;AAAA;AAAA,kBAbJ,eAeI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,aAAd;AAA4B,YAAA,MAAM,EAAC,kBAAnC;AAA8C,YAAA,IAAI,EAAGV,OAAD,IAAa3D,gBAAgB,CAAC2D,OAAO,CAACW,WAAT,CAAjF;AAAwG,YAAA,QAAQ;AAAhH;AAAA;AAAA;AAAA;AAAA,kBAfJ,eAgBI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,WAAd;AAA0B,YAAA,MAAM,EAAC,0BAAjC;AAA6C,YAAA,QAAQ,MAArD;AAAuD,YAAA,iBAAiB,EAAC;AAAzE;AAAA;AAAA;AAAA;AAAA,kBAhBJ,eAiBI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,YAAd;AAA2B,YAAA,MAAM,EAAC,4BAAlC;AAAkD,YAAA,IAAI,EAAGX,OAAD,IAAa3D,gBAAgB,CAAC2D,OAAO,CAACY,UAAT,CAArF;AAA2G,YAAA,QAAQ;AAAnH;AAAA;AAAA;AAAA;AAAA,kBAjBJ,eAkBI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,UAAd;AAAyB,YAAA,MAAM,EAAC,oCAAhC;AAAiD,YAAA,QAAQ,MAAzD;AAA2D,YAAA,iBAAiB,EAAC;AAA7E;AAAA;AAAA;AAAA;AAAA,kBAlBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YA7BJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAwDH;;GApLuBvD,O;UAqCLV,S;;;KArCKU,O","sourcesContent":["import { Panel } from 'primereact/panel';\r\nimport React, { useState,useEffect,useRef } from 'react';\r\nimport API from '../utils/request'\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { toDateTimeString } from \"../utils/date\";\r\nimport { numberFormat } from \"../utils/number\";\r\nimport { Button } from 'primereact/button';\r\nimport { Toast } from 'primereact/toast';\r\nimport { confirmDialog } from 'primereact/confirmdialog';\r\nimport { Dialog } from 'primereact/dialog';\r\nimport { useFormik } from 'formik';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport {Password} from 'primereact/password';\r\n\r\nimport { Dropdown } from 'primereact/dropdown';\r\nimport { InputNumber } from 'primereact/inputnumber';\r\nimport { APPCONFIG } from '../utils/constants';\r\nimport { FileUpload } from 'primereact/fileupload'; \r\nimport {Checkbox} from 'primereact/checkbox';\r\nimport { InputTextarea } from 'primereact/inputtextarea';\r\nimport QrReader from 'react-qr-reader'\r\n\r\nexport default function Receipt() {\r\n    const [result, setResult] = useState('Not Found');\r\n    \r\n    const toast = useRef(null);\r\n    const [data, setData] = useState({});\r\n    const [tickets,setTickets] = useState([]);\r\n    const [selectedList, setSelectedList] = useState({});\r\n    const [displayModal, setDisplayModal] = useState(false);\r\n    const [showcomp, setShowcomp] = useState();\r\n\r\n    useEffect(() => {\r\n        reloadData();\r\n    }, [])\r\n\r\n\r\n    const setSelectedRowCustomize = (e) => {\r\n        setSelectedList(e.value);\r\n    };\r\n\r\n    const reloadData =  () =>{\r\n        API.get('/api/admin/receipt', \r\n        {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }})\r\n            .then((res) =>{\r\n                setData(res.data.data);\r\n            })\r\n            .catch((error)=>{\r\n                console.log(error);\r\n        });\r\n        setSelectedList({});\r\n    }\r\n    \r\n    \r\n    \r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            id: '',\r\n            name: '',\r\n            description: '',\r\n            pathVideo: '',\r\n            screenTime: 0,\r\n            isShowing: true,\r\n            categoryId: '',\r\n            pathThumbnail : '',\r\n            base64: ''\r\n        },\r\n        validate: (data) => {\r\n            const errors = {};\r\n            \r\n            return errors;\r\n        },\r\n        onSubmit: (data) => {\r\n            console.log(data);\r\n            \r\n            // API.post('/api/admin/movie', data, \r\n            // {\r\n            //     headers: {\r\n            //         'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n            // }})\r\n            //     .then((res) =>{\r\n            //         if(res.data.ok){\r\n            //             toast.current.show({severity:'success', summary: 'Thông báo', detail: res.data.message, life: 3000});\r\n            //             reloadData();\r\n            //             setDisplayModal(false);\r\n            //         }else{\r\n            //             toast.current.show({severity:'warn', summary: 'Thông báo', detail: res.data.message, life: 3000});\r\n            //         }\r\n                    \r\n            //     })\r\n            //     .catch((error)=>{\r\n            //         console.log(error);\r\n            //         toast.current.show({severity:'error', summary: 'Thông báo', detail:'Lỗi hệ thống', life: 3000});\r\n            // });\r\n        }\r\n    });\r\n\r\n    \r\n\r\n    const statusBodyTemplate = (rowData) => {\r\n        return ( rowData.isGetTicket == 0 ?\r\n            <Button label=\"CHƯA LẤY\" className=\"p-button-warning\" /> : \r\n            <Button label=\"ĐÃ LẤY\" className=\"p-button-success\" />);\r\n    }\r\n\r\n    const statusPaymentType = (rowData) => {\r\n        return (rowData.paymentType == 0 ? 'Tiền mặt' : 'Qua Thẻ');\r\n    }\r\n\r\n    const handleScan = data => {\r\n        if (data) {\r\n          setResult(data);\r\n        }\r\n      }\r\n    const handleError = err => {\r\n        console.error(err)\r\n    }\r\n\r\n    const getListTicket = async () =>{\r\n        API.get('/api/admin/receipt/'+result, \r\n        {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }})\r\n            .then((res) =>{\r\n                setTickets(res.data.data[0]);\r\n            })\r\n            .catch((error)=>{\r\n                console.log(error);\r\n        });\r\n    }\r\n\r\n    const showListTicket = () =>{\r\n        // const status = ( tickets.isGetTicket == 0 ?\r\n        //     <Button label=\"CHƯA LẤY\" className=\"p-button-warning\" /> : \r\n        //     <Button label=\"ĐÃ LẤY\" className=\"p-button-success\" />);\r\n\r\n        setShowcomp(<div className='p-gird'>\r\n                    <div className='p-grid'>{tickets.isGetTicket  ? 'Đã Lấy' :'Chưa lấy'}</div>           \r\n                </div>);\r\n    }\r\n\r\n    return (\r\n        <Panel header=\"Danh sách các phim\">\r\n            <Toast ref={toast} />\r\n            <div className=\"p-grid\">\r\n                <div className=\"p-field p-mr-2\">\r\n                    <Button label=\"Quét mã\" icon=\"pi pi-print\" className=\"p-button-success\" onClick={() => {setDisplayModal(true);setResult('Not Found');setTickets({});}}/>\r\n                </div>\r\n            </div>\r\n            <div className=\"p-grid\">\r\n                <Dialog header={'Quét mã'} maximizable onHide={() => {setDisplayModal(false);setResult('Not Found');setTickets({});}} visible={displayModal}  breakpoints={{'960px': '75vw', '640px': '100vw'}} style={{width: '50vw'}}>\r\n                    <div className=\"p-grid\">    \r\n                        <div className=\"p-col-6\">\r\n                            <QrReader\r\n                                delay={300}\r\n                                onError={handleError}\r\n                                onScan={handleScan}\r\n                                style={{ width: '100%' }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"p-col-6\">\r\n                            <div className='p-grid'>\r\n                                <div className=\"p-col-6\"><h3>Mã Hoá Đơn: {result}</h3></div>\r\n                                <div className=\"p-col-6 p-mt-3\"><Button label=\"Nhận vé\" className=\"p-button-success\" onClick={() => showListTicket()}/></div>\r\n                            </div>\r\n                            {showcomp}\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </Dialog>\r\n            </div>\r\n            <div className=\"datatable-templating-demo\">\r\n                <div className=\"card\">\r\n                    <DataTable value={data} paginator rows={3} scrollable scrollHeight=\"500px\"\r\n                        selection={selectedList} \r\n                        onSelectionChange={setSelectedRowCustomize} \r\n                        selectionMode=\"single\" \r\n                        dataKey=\"id\"\r\n                        stateStorage=\"local\" \r\n                        stateKey=\"dt-state-demo-local\"\r\n                        emptyMessage=\"Không có hoá đơn nào\">\r\n                        <Column field=\"id\" header=\"Mã hoá đơn\" sortable filter filterPlaceholder=\"Search by name\"></Column>\r\n                        <Column field=\"customerName\" header=\"Tên người đặt\" sortable filter filterPlaceholder=\"Search by name\"></Column>\r\n                        <Column field=\"customerPhone\" header=\"Số điện thoại\" sortable filter filterPlaceholder=\"Search by name\"></Column>\r\n                        <Column field=\"paymentType\" header=\"Hình thức thanh toán\" body={statusPaymentType} sortable ></Column>\r\n                        <Column field=\"isGetTicket\" header=\"Trạng thái\" sortable body={statusBodyTemplate}></Column>\r\n                        <Column field=\"paymentDate\" header=\"Ngày thanh toán\" body={(rowData) => toDateTimeString(rowData.paymentDate)} sortable ></Column>\r\n\r\n                        <Column field=\"createdDate\" header=\"Ngày tạo\" body={(rowData) => toDateTimeString(rowData.createdDate)} sortable ></Column>\r\n                        <Column field=\"createdBy\" header=\"Người tạo\" sortable  filterPlaceholder=\"Search by name\"></Column>\r\n                        <Column field=\"updateDate\" header=\"Ngày cập nhật\" body={(rowData) => toDateTimeString(rowData.updateDate)} sortable  ></Column>\r\n                        <Column field=\"updateBy\" header=\"Người cập nhật\" sortable  filterPlaceholder=\"Search by name\"></Column>\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        </Panel>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}